@{
    ViewBag.Title = "Bestill flybillett";
}
    @*<script>
        $(document).ready(function () {

            //function endre() {
            //    $('#hei').attr("disabled", "disabled");
            //}
            //$("#checkboxid").change(function () {
            //        if (this.checked) {
            //            $('.Rad').css("background-color", "yellow");
            //        }
            //        else {
            //            $('#hei').fadeIn('slow');
            //        }
            //    }
            //if ($("#checkboxid").prop('checked', true)) {
            //    $('.Rad').css("background-color", "yellow");
            //}

            $("#radiobutt input[type=radio]").each(function (i) {
                $(this).click(function () {
                    if (i == 1) {
                        $("#hjemreiseDato").attr("disabled", "disabled");
                        $('#hjemreiseTekst').css("color", "grey");
                    }
                    else {
                        $("#hjemreiseDato").removeAttr("disabled");
                        $('#hjemreiseTekst').css("color", "black"); //endre til riktig farge
                    }
                });

            });

            //øk/mink-knapper
            //function increase() {
            //    $('.Rad').css("background-color", "yellow");
            //    $('voksne').val();
            //}

            //øk/mink for voksne

            $('#minusVoksen').click(function () {
                var count = $('#voksne').val();
                count--
                $('#voksne').val(count);
                if (count <= 0) {
                    $("#minusVoksen").attr("disabled", "disabled");
                }
            })

            $('#plussVoksen').click(function () {
                var count = $('#voksne').val();
                count++
                $('#voksne').val(count);
                if (count > 0) {
                    $('#minusVoksen').removeAttr("disabled");
                }
            })

            //øk/mink for barn

            $('#minusBarn').click(function () {
                var count = $('#barn').val();
                count--
                $('#barn').val(count);
                if (count <= 0) {
                    $("#minusBarn").attr("disabled", "disabled");
                }
            })

            $('#plussBarn').click(function () {
                var count = $('#barn').val();
                count++
                $('#barn').val(count);
                if (count > 0) {
                    $('#minusBarn').removeAttr("disabled");
                }
            })
        });
    </script>*@
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Bestill flybilletter</title>
    <script type="text/javascript">
        $(function () {

            // hent alle fraFlyplass, bygg opp dropdown1 når siden lastes

            $.ajax({
                url: '/Home/hentAlleFraFlyplasser',
                type: 'GET',
                dataType: 'json',
                success: function (fraListe) {
                    VisDropDown1(fraListe);
                },
                error: function (x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });

            function VisDropDown1(fraListe) {
                var utStreng = "";
                for (var i in fraListe) {
                    utStreng += "<option value='" + fraListe[i] + "'>" + fraListe[i] + "</option>";
                }
                $("#drop1").empty().append(utStreng);
            }

            // opprett en hendelse på dropdown-listen fraFlyplass når siden lastes

            $("#drop1").click(function () {
                var valgtFlyplass = $(this).val();
                $.ajax({
                    url: '/Home/hentTilFlyplasser',
                    type: 'GET',
                    data: { fraFlyPlass: valgtFlyplass },
                    dataType: 'json',
                    success: function (tilListe) {
                        VisDropDown2(tilListe);
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            });

            function VisDropDown2(tilListe) {
                var utStreng = "";
                for (var i in tilListe) {
                    utStreng += "<option value='" + tilListe[i] + "'>" + tilListe[i] + "</option>";
                }
                $("#drop2").empty().append(utStreng);
            }

            // opprett en hendelse på dropdown-listen valgtFlyplass når siden lastes
            $("#drop2").click(function () {
                var valgtTilFlyplass = $(this).val();
                var valgtFraFlyplass = $("#drop1").val();
                $.ajax({
                    url: '/Home/hentTilFlyplasser',
                    type: 'GET',
                    data: { fraFlyPlass: valgtFlyplass },
                    dataType: 'json',
                    success: function (tilListe) {
                        VisDropDown2(tilListe);
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            });

            function VisStrekninger(strekninger) {
                var utStreng = "<table class='table'><tr><th>Fra</th><th>Til</th><th>Dato</th><th>Tid</th><th>Pris</th></tr>";
                for (var i in strekninger) {
                    utStreng += "<tr><td>" + strekninger[i].fraFlyplass + "</td><td>" + strekninger[i].tilFlyplass +
                        "</td><td>" + strekninger[i].dato + "</td><td>" + strekninger[i].tid + "</td><td>" + strekninger[i].pris + "<tr/>";
                }
                utStreng += "</table>"
                $("#strekninger").empty().append(utStreng);
            }

            $("#returKnapp").click(function () {
                var valgtTilFlyplass = $("#drop2").val();
                $.ajax({
                    url: '/Home/hentStrekning',
                    type: 'GET',
                    data: {
                        fraFlyPlass: valgtFraFlyplass,
                        tilFlyPlass: valgtTilFlyplass
                    },
                    dataType: 'json',
                    success: function (strekninger) {
                        VisStrekninger(strekninger);
                    },
                    error: function (x, y, z) {
                        alert(x + '\n' + y + '\n' + z);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="row">
            <div id="dropDown1" class="col col-sm-2">
                Velg fra by:<br />
                <select id="drop1" class="btn btn-primary dropdown-toggle"></select>
            </div>
            <div id="dropDown2" class="col">
                Velg til by:<br />
                <select id="drop2" class="btn btn-primary dropdown-toggle"></select>
            </div>
        </div>
    </div>
    Her er valgte mulige fly: <br />
    <div id="strekninger">
    </div>

     <button class="button active" type="button" id="returKnapp">Legg til retur</button>
</body>
</html>